<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Countdown & Draggable Character Sheet</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;}
body { 
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    color: #fff;
    overflow-y: auto;
    background: black;
}

/* Full-screen background image scaled to fit without cropping */
#bgImage {
    position: fixed;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    background: url('zavndar.png') no-repeat center center;
    background-size: contain;
    background-color: black;
    z-index: 50;
}

/* YouTube Video Background */
#videoBackground {
    position: fixed;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    z-index: 49;
    pointer-events: none;
    display: none; /* Hidden until username entered */
}

/* Countdown container */
.container { 
    background: rgba(0,0,0,0.7); 
    border-radius:20px; 
    padding:40px; 
    box-shadow:0 15px 30px rgba(0,0,0,0.4); 
    text-align:center; 
    max-width:800px; 
    width:100%; 
    margin-bottom:30px;
    z-index: 60;
    position: relative;
    display: none; /* Hidden until username entered */
}
h1 { font-size:2.8rem; margin-bottom:10px; color:#ff9a8b; text-shadow:2px 2px 4px rgba(0,0,0,0.3);}
.subtitle { font-size:1.4rem; margin-bottom:40px; color:#a6c1ee;}
.countdown { display:flex; justify-content:center; gap:20px; margin-bottom:40px; flex-wrap:wrap;}
.time-unit { background: rgba(255,255,255,0.1); border-radius:15px; padding:25px 15px; min-width:120px; backdrop-filter:blur(10px); box-shadow:0 8px 16px rgba(0,0,0,0.2);}
.time-value { font-size:3.5rem; font-weight:700; margin-bottom:5px; background:linear-gradient(to right,#ff9a8b,#ff6a88); -webkit-background-clip:text; -webkit-text-fill-color:transparent;}
.time-label { font-size:1.2rem; color:#a6c1ee; text-transform:uppercase; letter-spacing:2px;}
.progress-container { background: rgba(255,255,255,0.2); height:20px; border-radius:10px; margin:30px 0; overflow:hidden;}
.progress-bar { height:100%; background: linear-gradient(to right,#ff9a8b,#ff6a88); border-radius:10px; width:0%; transition:width 0.5s ease;}

/* Login Overlay */
#loginOverlay {
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    background: rgba(0,0,0,0.9);
    display:flex;
    justify-content:center;
    align-items:center;
    z-index:100;
    flex-direction:column;
    color:white;
}
#loginOverlay h2 { margin-bottom:20px; }
#usernameInput { padding:10px 15px; border:none; border-radius:8px; font-size:1rem; margin-bottom:15px;}
#submitUsername { padding:10px 20px; border:none; border-radius:8px; background:#ff9a8b; font-weight:bold; cursor:pointer;}
#submitUsername:hover { background:#ff6a88; }

/* Floating Character Sheet */
.floating-sheet { position:fixed; top:50%; right:-420px; transform:translateY(-50%); width:400px; max-height:80vh; background:#2a2a40; border-radius:15px; box-shadow:0 0 25px rgba(0,0,0,0.7); transition:right 0.5s ease; z-index:70; overflow:hidden;}
.floating-sheet.open { right:20px;}
.sheet-header { background:#111; padding:12px; text-align:center; cursor:pointer;}
.sheet-header h2 { margin:0; font-size:22px; color:#d19ce3; letter-spacing:1px;}
.sheet-image { text-align:center; background:#1a1a2e; padding:12px;}
.sheet-image img { width:130px; border-radius:50%; border:3px solid #d19ce3;}
.sheet-content { padding:15px; line-height:1.6; max-height:calc(80vh - 170px); overflow-y:auto;}
.sheet-content strong { color:#d19ce3;}
hr { border:none; height:1px; background:#555; margin:12px 0;}

/* Draggable Floating Orb Button */
#orbContainer {
    position: fixed;
    top: 50%;
    right: 20px;
    transform: translateY(-50%);
    width: 60px;
    height: 60px;
    pointer-events: none; 
    z-index: 71;
}
#toggleButton {
    position: absolute;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: rgba(209,156,227,0.7);
    border: none;
    cursor: pointer;
    font-weight: bold;
    color: #111;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    text-align: center;
    transition: background 0.3s;
    pointer-events: auto;
    box-shadow: 0 0 15px rgba(209,156,227,0.6);
}
#toggleButton:hover { background: rgba(255,154,139,0.9); color:#fff; }

@media(max-width:480px){
    .time-unit{min-width:70px;padding:15px 5px;}
    .time-value{font-size:2rem;}
    .time-label{font-size:0.9rem;}
    .floating-sheet{width:300px;}
}
</style>
</head>
<body>

<!-- Background Image -->
<div id="bgImage"></div>

<!-- YouTube Video Background -->
<div id="videoBackground">
    <iframe width="100%" height="100%" src="https://www.youtube.com/embed/l09yewirJbQ?autoplay=1&mute=0&loop=1&playlist=l09yewirJbQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
</div>

<!-- Login Overlay -->
<div id="loginOverlay">
    <h2>Enter your username</h2>
    <input type="text" id="usernameInput" placeholder="Enter nickname" maxlength="20">
    <button id="submitUsername">Start</button>
</div>

<!-- Countdown Section -->
<div class="container" id="mainContent">
    <h1>Countdown Test</h1>
    <p class="subtitle">15-second countdown test</p>
    <p class="subtitle">Welcome, <span id="displayName"></span> ðŸŽ‰</p>

    <div class="countdown">
        <div class="time-unit"><div class="time-value" id="days">00</div><div class="time-label">Days</div></div>
        <div class="time-unit"><div class="time-value" id="hours">00</div><div class="time-label">Hours</div></div>
        <div class="time-unit"><div class="time-value" id="minutes">00</div><div class="time-label">Minutes</div></div>
        <div class="time-unit"><div class="time-value" id="seconds">00</div><div class="time-label">Seconds</div></div>
    </div>
    <div class="progress-container"><div class="progress-bar" id="progress-bar"></div></div>
</div>

<!-- Floating Character Sheet -->
<div class="floating-sheet" id="charSheet">
    <div class="sheet-header"><h2>Zavndar</h2></div>
    <div class="sheet-image"><img src="zavndar.png" alt="Character Image"></div>
    <div class="sheet-content">
        <p><strong>Name:</strong> Zavndar</p>
        <p><strong>Age:</strong> 17</p>
        <p><strong>Race:</strong> Cyborg </p>
    </div>
</div>

<!-- Floating Orb -->
<div id="orbContainer"><button id="toggleButton">Sheet</button></div>

<script>
// ===== USERNAME HANDLING =====
const loginOverlay = document.getElementById("loginOverlay");
const usernameInput = document.getElementById("usernameInput");
const submitUsername = document.getElementById("submitUsername");
const mainContent = document.getElementById("mainContent");
const displayName = document.getElementById("displayName");
const videoBg = document.getElementById("videoBackground");
const bgImage = document.getElementById("bgImage");

submitUsername.addEventListener("click", () => {
    let name = usernameInput.value.trim();
    if(name === "") return;
    displayName.textContent = name;
    loginOverlay.style.display = "none";
    mainContent.style.display = "block";
    videoBg.style.display = "block";
    bgImage.style.display = "none";
});

// ===== 15-SECOND COUNTDOWN =====
let countdownEnd = new Date().getTime() + 15*1000; // 15 seconds from now
function updateCountdown() {
    let now = new Date().getTime();
    let diff = Math.floor((countdownEnd - now)/1000);
    diff = Math.max(0,diff);

    document.getElementById('days').textContent = '00';
    document.getElementById('hours').textContent = '00';
    document.getElementById('minutes').textContent = '00';
    document.getElementById('seconds').textContent = diff.toString().padStart(2,'0');

    document.getElementById('progress-bar').style.width = (100 - (diff/15*100)) + '%';

    if(diff <= 0){ window.location.href = "floor.html"; }
}
updateCountdown();
setInterval(updateCountdown, 200); // smoother update

// ===== SHEET TOGGLE =====
const sheet = document.getElementById('charSheet');
document.getElementById('toggleButton').addEventListener('click',()=>{sheet.classList.toggle('open');});

// ===== Draggable Button =====
const btn = document.getElementById('orbContainer');
let isDragging = false, offsetX, offsetY;
btn.addEventListener('mousedown', e=>{
    isDragging = true;
    offsetX = e.clientX - btn.getBoundingClientRect().left;
    offsetY = e.clientY - btn.getBoundingClientRect().top;
});
document.addEventListener('mousemove', e=>{
    if(isDragging){
        btn.style.left = (e.clientX - offsetX) + 'px';
        btn.style.top = (e.clientY - offsetY) + 'px';
        btn.style.right = 'auto';
        btn.style.transform = 'translate(0,0)';
    }
});
document.addEventListener('mouseup', e=>{ isDragging=false; });
</script>
</body>
</html>
